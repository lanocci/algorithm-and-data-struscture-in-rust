# Point / Vector and Segment / Line

## 内積と外積 (dot product(・) and cross product(x))

### 雑なまとめ

- 内積と外積の性質を用いると、線と線の位置関係を計算するときにとても役立つ
  - 線と線が直角に交わるとき、その線同士の内積は0
  - 線と線が平行なとき、その線同士の外積は0
  - 2つのベクトルによる外積の大きさ = 2つのベクトルが作る平行四辺形の大きさ
  - ↑の性質を応用すると、例えば点と線の距離を求めることもできる
    - 線分Sの片方の端p1から点pへのベクトルと線分Sそのものを表すベクトルの外積(=平行四辺形の面積)から線分Sを表すベクトルの大きさを除算すると平行四辺形の高さを得られる
    - 点から線分への最小距離は点から線へ直角に伸びるベクトルの長さ(=平行四辺形の高さ)なので、これがそのまま点と線の距離になる

### 内積


### 外積

- ベクトル `a`, `b` の外積の大きさは、`a`と`b`がなす角を`θ`とすると

```
|a x b| = |a||b|sinθ
```

- 外積の向きは`a`, `b`を含む平面に垂直
- `a`をその始点に固定し、`θ`だけ回転させて`b`に重ねた時の右ねじ方向に伸び縮みする
  - この性質を使うと、例えば線分と点の位置関係を調べることができる (c.f. Segment#clockwise)
    - 線分S(p0, p1)に対して、点p2の位置が、
      - 反時計回りの場合: 線分(p0, p1)と線分(p0, p2)がなす外積は `+`
      - 時計回りの場合: 線分(p0, p1)と線分(p0, p2)がなす外積は `-`
      - 直線上場合: 線分(p0, p1)と線分(p0, p2)がなす外積は `0`
        - さらに内積を用いて、、
          - 内積が `-`: `cosθ` が `-` なので、線分Sよりもp0側に出たところにp2がある
          - それ以外: 線分(p0, p1) = ベクトル a と　線分(p0, p2) = ベクトルb を比較して
            - ベクトルa が大きければ点pは線分S上
            - ベクトルbが大きければ点pは線分Sよりもp1側に出たところにp2がある
- 外積の大きさは`a`, `b`が作る平行四辺形の面積と等しい
- 外積は3次元で表現されるが、平面上のベクトル同士の外積は元のベクトルのz軸を0に固定することで求めることができる

```
|a x b| = |a||b|sinθ
|a x b| = (a<y> x b<z> - a<z> x b<y>, a<z> x b<x> - a<x> x b<z>, a<x> x b<y> - a<y> x b<z>) // ここで、z = 0 を代入すると
        = (a<x> x b<y> - a<y> x b<z>) // これだけが残る
```